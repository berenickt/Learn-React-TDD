# 1. 테스트란?

- 제품 or 서비스의 품질을 확인
- 소프트웨어의 버그를 찾음
- 즉, 제품이 예상하는대로 동작하는지 확인하는 작업
- cf. 제품 = 함수, 특정 기능, UI, 성능, API 스펙

---

# 2. 언제 테스트를 해야하나?

## 2.1 예전 방식

- 개발 -> QA 테스트 -> 배포
- 수동적으로 사람이 일일히 QA테스트를 해야되서 시간이 많이 소요됨
- 검증 비용도 늘어남 (병목현상, bottleneck 현상도 발생)
- 문제도 뒤늦게 파악됨

## 2.2 요즘 방식

- 개발하면서 자동으로 테스트 -> 배포
- 개발하면서 자동 테스트되기때문에 속도가 빨라짐
- 개발하면서 직접 테스트하기에 상대적으로 쉽게 작성 가능
- 예전에 비해 상대적으로 많은 코드를 감당할 수 있게 됨
- 그럼에도 사용자 입장에서 제품이 어떻게 동작해야하는지 QA가 필요해서
  - QA팀은 여전히 필요합니다.

---

# 3. 테스트 장점

## 3.1 장점

- 제품, 기능이 정상적으로 동작하는 자신감
- 요구사항 만족할 수 있는 확률이 올라감
- 이슈에 대해 예측 가능
- 버그를 빠르게 발견 가능
- 자신감있게 리팩토링 가능
- 손쉬운 유지보수
- 코드의 품질 향상 가능
- 코드 간 의존성을 낮춤 (디커플링, Decoupling)
- 좋은 문서화가 가능
- 개발 시간을 절약할 수 있음

---

# 4. 테스트 피라미드(Test Pyramid)

어떤 분야든, 어떤 프로젝트든 공통적으로 쓰는 테스트가 있는데,
그것이 바로 `테스트 피라미드`입니다.

1. `단위 테스트(Unit Test)`
   - 여기서 단위는 함수, 모듈, 클래스를 테스트하는 것
   - e.g. 자동차를 테스트한다면, 바퀴 하나만 테스트하는 것
2. `통합 테스트(Integration Test)`
   - 여러 가지 단위를 통합했을 떄, 상호작용이 잘 되는지 테스트하는 것
   - e.g. 자동차 바퀴, 창문, 차체를 합쳤을떄 잘 되는지 테스트하는 것
3. `E2E 테스트(end-to-end Test)`
   - UI 테스트, 사용자 테스트를 의미
   - e.g. 운전자가 운전했을 떄, 발생하는 테스트 케이스를 모두 테스트

## 4.1 근데 왜 피마리드 테스트일까요?

단위테스트에서 통합테스트를 거쳐 E2E 테스트까지 점점 비용이 비싸집니다.
이는 개발할때도 문제를 발견해서 고칠 떄도 마찬가지입니다.

속도측면에서도 마찬가지입니다. 단위별로 테스트하는게 시간이 빠르고,
단위->통합->E2E로 올라갈수록 테스트하는 시간이 길어지니다.

그래서 가장 비용이 낮고, 속도가 빠른 단위테스트에 많은 시간을 투입해야 효율성이 높아집니다.
하지만 바퀴를 만드는 것에만 집중한다고, 자동차가 잘 굴러가지 않겠죠?
통합테스트, E2E도 정말 중요합니다.

## 4.2 테스트 피마미드 외 테스트

- Contract Test (계약 테스트)
- A/B Test
- Stress Test (스트레스 테스트)

프로젝트의 상황과 필요에 따라서 다양한 테스트 기법들이 있습니다.
또 회사마다 팀마다 다 다릅니다.
개발팀에서 `단위, 통합테스트`를 하고, QA팀에서 `E2E 테스트`를 하는 곳도 있습니다.
또는 개발팀에서 `단위, 통합, E2E` 모두 테스트를 하는 곳도 있습니다.
통상적으로 개발자들이 필수적으로 알아야 하는 건 `유닛, 통합테스트`입니다.

---

# 5. TDD란?

- TDD(Test-driven development, 테스트 주도 개발)
- 개발(코드 작성)전 테스트 코드를 먼저 작성하는 방법
- 구현하기 전에 테스트 코드를 작성하기에
  - 작성된 테스트를 통과하기 위한 양 만큼의 심플한 코드를 작성합니다.
  - 이걸 반복하는 방식이 바로 TDD입니다.
- 이 작업이 끝나면 Refactoring 작업을 시작할 수 있습니다.
  - 이 리팩토링을 자신있게 할 수 있는 이유는 테스트코드가 있기 때문이죠.

## 5.1 TDD 장점

- 테스트를 작성하기 위해서는 먼저 `요구사항 분석 및 이해`가 필수적입니다.
- 이런 요구사항의 철저한 이해된 후에 `설계` 측면에서 테스트 코드를 작성합니다.
- 그래서 개발하기 이전에 `모든 요구사항(목표)에 대해 점검, 이해, 확인`할 수 있습니다.
- 또 단순 구현을 넘어서 사용자 입장에서 코드를 작성하게 됩니다.
  - 즉, 인터페이스 위주로 코드를 작성하기 때문에
  - 코드들간의 Decoupling(디커플링, 의존성)을 줄여 코드 퀄리티가 향상됩니다.
- 또 하나의 작은 단위로 개발하니 개발 집중력도 올라갑니다.

---

# 6. 모든 개발자들이 다 TDD를 해야하나?

- 팀이 강제해서 TDD를 하든, 개인이 특정 기능에서 TDD를 할지는 개인의 역량입니다.
- TDD가 좋다면 TDD를 해도 좋고, 개발완료한 뒤에 테스트 코드를 작성하든 자유입니다.
- 정말 중요한 것은 코드 한 줄이라도 코드와 테스트코드가 함께 repository에 있어야 합니다.
- 코드 리뷰를 요청하기 전에, 코드리뷰를 받기 전에
  - 그 코드가 버그가 없고, 기존 코드에도 나쁜 영향을 주지 않았다는
  - 검증할 수 있는 테스트코드가 함께 있어야 합니다.
  - 또 테스트 코드 그 자체가 좋은 문서화도 됩니다.
- TDD를 할떄도 있고, 안하는 곳도 있지만,
  - 적어도 사용자에게 배포하는 코드라면,
  - 테스트 코드는 거의 필수입니다.

## 6.1 언제 TDD를 쓰나?

- 요구사항이 명확할 떄
- 비즈니스 로직일 경우
- 협업시 명세서(문서)의 역할이 필요할 떄
- 설계에 대한 고민이 필요할 떄

## 6.2 TDD를 쓰지 않을 떄

- UI 컴포넌트를 작성할 떄
  - 보통 UI를 먼저 만들어두고, UI 테스트 로직을 작성함
- 요구사항이나 명세서가 명확하지 않을 떄

## 6.3 중요한 점

- TDD를 하지 않든, 하든 가장 중요한 것은 코드를 배포, 리뷰하기 전에는
- 테스트 코드가 있어야 한다는 겁니다.
